<!doctype html><html lang=zh-cn>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="最近对51开发板感兴趣, 用ma6174的51小板搞了下.
不过上来就卡住了, 由于笔记本双系统 ubuntu+win8, 在win8下死活装不上 usb转串口的驱动程序, 只能考虑使用虚拟机. 由于使用的主系统是ubuntu, 所以选择在ubuntn中的virtualbox中安装xp.
xp安装不讲
usb映射 最需要的虚拟机的一个功能是usb映射, 系统中的vbox是通过ubuntu源安装的, 装好系统后google了好久都没有把usb映射搞好, 在官方论坛中找到了原因, ** ubuntu源安装的不支持usb映射 **&amp;hellip;
官网下载安装好后, 运行提示没有权限控制usb子系统, 需要将用户添加到vboxusers用户组.
&amp;quot;FAILED TO ACCESS THE USB SUBSYSTEM.....
执行: sudo usermod -a -G vboxusers youruser
建议注销一下
-a 参数是将你的用户添加到新的用户组而不将你从原来的用户组中删除.
现在已经能够进行usb映射了,如果是笔记本的话还能够自动识别内置摄像头.
 usb 
STC ISP 握手失败 提示信息
Chinese:正在尝试与 MCU/单片机 握手连接 ... Chinese:连接失败，请尝试以下操作： 1.在单片机停电状态下，点下载按钮，再给单片机上电 ... 仍在连接中, 请给 MCU 上电... MCU Type is: STC89C52RC MCU Firmware Version: 4.3C Chinese:MCU 固件版本号: 4.3C Double speed / 双倍速: 12T/单倍速 振荡放大器增益: full gain 下次下载时 P1."><title>51最小开发板使用记录及virtualbox相关</title>
<link rel=canonical href=https://zhw.in/post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="51最小开发板使用记录及virtualbox相关">
<meta property="og:description" content="最近对51开发板感兴趣, 用ma6174的51小板搞了下.
不过上来就卡住了, 由于笔记本双系统 ubuntu+win8, 在win8下死活装不上 usb转串口的驱动程序, 只能考虑使用虚拟机. 由于使用的主系统是ubuntu, 所以选择在ubuntn中的virtualbox中安装xp.
xp安装不讲
usb映射 最需要的虚拟机的一个功能是usb映射, 系统中的vbox是通过ubuntu源安装的, 装好系统后google了好久都没有把usb映射搞好, 在官方论坛中找到了原因, ** ubuntu源安装的不支持usb映射 **&amp;hellip;
官网下载安装好后, 运行提示没有权限控制usb子系统, 需要将用户添加到vboxusers用户组.
&amp;quot;FAILED TO ACCESS THE USB SUBSYSTEM.....
执行: sudo usermod -a -G vboxusers youruser
建议注销一下
-a 参数是将你的用户添加到新的用户组而不将你从原来的用户组中删除.
现在已经能够进行usb映射了,如果是笔记本的话还能够自动识别内置摄像头.
 usb 
STC ISP 握手失败 提示信息
Chinese:正在尝试与 MCU/单片机 握手连接 ... Chinese:连接失败，请尝试以下操作： 1.在单片机停电状态下，点下载按钮，再给单片机上电 ... 仍在连接中, 请给 MCU 上电... MCU Type is: STC89C52RC MCU Firmware Version: 4.3C Chinese:MCU 固件版本号: 4.3C Double speed / 双倍速: 12T/单倍速 振荡放大器增益: full gain 下次下载时 P1.">
<meta property="og:url" content="https://zhw.in/post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/">
<meta property="og:site_name" content="zhwei's Blog">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Notes"><meta property="article:published_time" content="2013-06-10T00:00:00+00:00"><meta property="article:modified_time" content="2013-06-10T00:00:00+00:00">
<meta name=twitter:site content="@zhwei_">
<meta name=twitter:creator content="@zhwei_"><meta name=twitter:title content="51最小开发板使用记录及virtualbox相关">
<meta name=twitter:description content="最近对51开发板感兴趣, 用ma6174的51小板搞了下.
不过上来就卡住了, 由于笔记本双系统 ubuntu+win8, 在win8下死活装不上 usb转串口的驱动程序, 只能考虑使用虚拟机. 由于使用的主系统是ubuntu, 所以选择在ubuntn中的virtualbox中安装xp.
xp安装不讲
usb映射 最需要的虚拟机的一个功能是usb映射, 系统中的vbox是通过ubuntu源安装的, 装好系统后google了好久都没有把usb映射搞好, 在官方论坛中找到了原因, ** ubuntu源安装的不支持usb映射 **&amp;hellip;
官网下载安装好后, 运行提示没有权限控制usb子系统, 需要将用户添加到vboxusers用户组.
&amp;quot;FAILED TO ACCESS THE USB SUBSYSTEM.....
执行: sudo usermod -a -G vboxusers youruser
建议注销一下
-a 参数是将你的用户添加到新的用户组而不将你从原来的用户组中删除.
现在已经能够进行usb映射了,如果是笔记本的话还能够自动识别内置摄像头.
 usb 
STC ISP 握手失败 提示信息
Chinese:正在尝试与 MCU/单片机 握手连接 ... Chinese:连接失败，请尝试以下操作： 1.在单片机停电状态下，点下载按钮，再给单片机上电 ... 仍在连接中, 请给 MCU 上电... MCU Type is: STC89C52RC MCU Firmware Version: 4.3C Chinese:MCU 固件版本号: 4.3C Double speed / 双倍速: 12T/单倍速 振荡放大器增益: full gain 下次下载时 P1.">
<link rel="shortcut icon" href=/images/favicon.ico>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-189071452-1','auto'),ga('send','pageview'))</script>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<h2 class=article-title>
<a href=/post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/>51最小开发板使用记录及virtualbox相关</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2013-06-10</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
1 minute read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>最近对51开发板感兴趣, 用<a class=link href=http://ma6174.cnblogs.com target=_blank rel=noopener>ma6174</a>的51小板搞了下.<br>
不过上来就卡住了, 由于笔记本双系统 <code>ubuntu</code>+<code>win8</code>, 在win8下死活装不上 usb转串口的驱动程序, 只能考虑使用虚拟机. 由于使用的主系统是ubuntu, 所以选择在ubuntn中的<code>virtualbox</code>中安装xp.</p>
<p>xp安装不讲</p>
<h3 id=usb映射>usb映射</h3>
<p>最需要的虚拟机的一个功能是usb映射, 系统中的vbox是通过ubuntu源安装的, 装好系统后google了好久都没有把usb映射搞好, 在官方论坛中找到了原因, ** ubuntu源安装的不支持usb映射 **&mldr;</p>
<p>官网下载安装好后, 运行提示没有权限控制usb子系统, 需要将用户添加到<code>vboxusers</code>用户组.</p>
<p><code>"FAILED TO ACCESS THE USB SUBSYSTEM.....</code></p>
<p>执行:
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>	sudo usermod -a -G vboxusers youruser</code></pre></div></p>
<p>建议注销一下</p>
<p><code>-a</code> 参数是将你的用户添加到新的用户组而不将你从原来的用户组中删除.</p>
<p>现在已经能够进行usb映射了,如果是笔记本的话还能够自动识别内置摄像头.</p>
<p><figure class=gallery-image style=flex-grow:234;flex-basis:562px>
<a href=/post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/media/16108715506188.jpg data-size=459x196>
<img src=/post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/media/16108715506188.jpg width=459 height=196 srcset="/post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/media/16108715506188_hu4ae629ad99e14c890c4461460dc8ca37_34476_480x0_resize_q100_box.jpg 480w, /post/51%E6%9C%80%E5%B0%8F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%E5%8F%8Avirtualbox%E7%9B%B8%E5%85%B3/media/16108715506188_hu4ae629ad99e14c890c4461460dc8ca37_34476_1024x0_resize_q100_box.jpg 1024w" loading=lazy alt=usb>
</a>
<figcaption>usb</figcaption>
</figure></p>
<h3 id=stc-isp-握手失败>STC ISP 握手失败</h3>
<p>提示信息</p>
<pre><code>Chinese:正在尝试与 MCU/单片机 握手连接 ...
Chinese:连接失败，请尝试以下操作：
 1.在单片机停电状态下，点下载按钮，再给单片机上电
...
 仍在连接中, 请给 MCU 上电...
MCU Type is: STC89C52RC
MCU Firmware Version: 4.3C
Chinese:MCU 固件版本号: 4.3C
Double speed / 双倍速:          12T/单倍速
振荡放大器增益:                  full gain
下次下载时 P1.0/P1.1 与下载无关
内部扩展AUX-RAM:        允许访问(强烈推荐)
下次下载用户应用程序时将数据Flash区擦除: NO
用户软件启动内部看门狗后:     复位关看门狗
内部时钟频率:11.059326M.
外部时钟频率:11.059326M.
Chinese:正在重新连接 ...
Connection failed. / 握手失败 (End: 17:23:05)
</code></pre>
<p>在 <a class=link href=http://www.amobbs.com/thread-4453586-1-1.html target=_blank rel=noopener>这里</a>找到了一个原因:</p>
<blockquote>
<p>STC单片机下载引导程序需要CPU完全断电，注意：完全断电！完全断电！完全断电！</p>
</blockquote>
<blockquote>
<p>1、要知道电源并非只从VCC进入，其他管脚也可能有微弱电流，至于多大，并不是非得达到CPU工作的电流。<br>
2、说到这里，大家可能明白了一点，微弱电源就是从你已经连好的ISP下载线进入了，下载线供电能力，有个体和偶然因素，所以很多人换根线或是改改波特率就好了，会判断是下载线不兼容的假像！这个假相迷惑了数代有识青年，并当做教本教育下一代，呵呵。<br>
3、问题如何解决：STC串口线TXD串一个300-500欧电阻、RXD串一个IN4148，保证你从此告别STC下载烦劳。</p>
</blockquote>
<p>我串联了两个180欧的电阻接上后还是握手失败, 又没有IN4148, 遂把最高波特率和最低波特率都改成<code>2400</code>, 了事.</p>
<pre><code>Current Baud is: / 当前波特率为: 2400 bps.
We are erasing MCU flash...
正在擦除应用程序区... ( 00:01 )
正在下载... ( 开始时间: 17:46:48 )
Program OK / 下载 OK
Verify  OK / 校验 OK
erase times/擦除时间 :  00:01
program times/下载时间: 00:15
Encrypt OK/ 已加密
</code></pre>
<h3 id=virtualbox运行时宿主机异常关机>virtualbox运行时宿主机异常关机</h3>
<pre><code>Kernel driver not installed (rc=-1908)

The VirtualBox Linux kernel driver (vboxdrv) is either not loaded or there is a permission problem with /dev/vboxdrv. Please reinstall the kernel module by executing

'/etc/init.d/vboxdrv setup'

as root. If it is available in your distribution, you should install the DKMS package first. This package keeps track of Linux kernel changes and recompiles the vboxdrv kernel module if necessary.
</code></pre>
<p>可以直接运行:</p>
<pre><code>sudo /etc/init.d/vboxdrv setup
</code></pre>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/notes/>Notes</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
</aside>
<script src=https://utteranc.es/client.js repo=zhwei/zhwei.github.com issue-term=title label=Comment crossorigin=anonymous async></script>
<style>.utterances{max-width:unset}</style>
<script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2012 -
2024 zhwei's Blog
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.4.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li>
<ol>
<li><a href=#usb映射>usb映射</a></li>
<li><a href=#stc-isp-握手失败>STC ISP 握手失败</a></li>
<li><a href=#virtualbox运行时宿主机异常关机>virtualbox运行时宿主机异常关机</a></li>
</ol>
</li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>